# 스토어관리(/store) 사용 가이드

이 문서는 **스토어관리 페이지**에서 제공하는 기능과, 운영(승인/연결) 전후에 무엇이 달라지는지 정리합니다.

## 1) 어떤 기능이 있나요?

- **상품/SEO 수정**
  - 상품명 / 태그 / 상세페이지(HTML) 수정
  - AI 추천(SEO 최적화) → “네이버 스토어 반영” 버튼으로 업데이트
- **주문/결제**
  - (준비됨) 심사완료 후 네이버 주문 API 연동으로 활성화
- **고객 저장소**
  - 주문/문의 화면에서 구매자 정보를 복사 → 붙여넣기 → 내 계정에만 저장
  - 검색/복사/삭제 지원
- **매출/제안**
  - 매출 상승을 위한 제안 섹션(로드맵/확장 기능 제안 포함)

## 2) 승인(심사완료) 전에는 왜 401이 나나요?

네이버 커머스 API는 **솔루션 심사/판매자 권한부여(연결)**가 완료되기 전에는
판매자 데이터(상품/주문 등) 접근을 **401(권한/인증 실패)**로 제한할 수 있습니다.

이 프로젝트는 승인 전에도 UI는 사용할 수 있게 만들되,
실제 API 호출이 막히는 경우에는 **401을 정확히 안내**하도록 구성했습니다.

## 3) 고객 저장소(DB) 마이그레이션 적용

고객 저장소는 Supabase 테이블 `customer_vault_entries`를 사용합니다.

- **마이그레이션 파일**: `supabase/migrations/20251214000000_customer_vault_entries.sql`

### 방법 A) Supabase Dashboard → SQL Editor에서 실행
1. Supabase Dashboard 접속
2. SQL Editor에서 위 마이그레이션 파일 내용을 실행

### 방법 B) CLI 사용(프로젝트 링크 필요)
환경에 따라 다르므로 팀 표준에 맞춰 `supabase db push` 또는 SQL 실행 방식을 사용하세요.

## 4) 승인 후 바로 확인할 것(체크리스트)

- **솔루션 상태**: 심사완료(승인)인지
- **판매자(상점) 권한부여/연결**: `nanumlab` 판매자가 솔루션에 연결되어 있는지
- **account_id 실값 확인**:
  - 문서에는 “SELLER 유형은 account_id별 토큰”이라고만 나오는 경우가 많습니다.
  - 운영 승인 후에는 커머스API센터 화면 어딘가에 **account_id로 쓰는 실제 값**이 표시됩니다.

## 5) 참고: 배포 스크립트

- `scripts/deploy-edge-functions.sh`에 `naver-order-list`가 포함되어 있습니다.
- 현재 `naver-order-list`는 승인 전을 대비한 **스켈레톤(501)**이며, 승인 후 주문 API 스펙 확정 시 실제 구현으로 교체합니다.


